from AccGenBot import BotzCity
from telethon import events, Button
import random
from AccGenBot.func import check 
from vars import var
import asyncio

USERNAME = var.CHANNEL_USERNAME
CHANNEL = var.CHANNEL_URL
LOGS = var.LOGS
bot = BotzCity

@bot.on(events.NewMessage(pattern="^[/!]netflix"))
async def _(event):
   join = [[Button.url("J·¥è…™…¥ ·¥Ñ ú·¥Ä…¥…¥·¥á ü", f"{CHANNEL}")]]
   lol = await check(USERNAME, event, bot)
   username = f"@{event.sender.username}" if username else event.sender.first_name
   if lol is False:
       await event.reply(f"**Heya {event.sender.first_name}, join my channel to use me!**", buttons=join)
       return
   gen = await event.reply("`Generating Account Pls weit`")
   with open("netflix.txt") as Alain:
       noice = Alain.read().splitlines()
       nice = random.choice(noice)
       email, pass = nice.split(":")
   okay = f"""**Account Generated Successfully**"
**Type:** `Netflix`
**Combo:** `{email}`:`{pass}`
**Email:** **{email}**
**Password:** `{pass}`

**Generated by:** {username}"""

   generated = f"""**New account üì®**\n
{okay}"""
   await gen.edit(okay)
   asyncio.sleep(1)
   await bot.send_message(LOGS, generated)
