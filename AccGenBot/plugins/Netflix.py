from AccGenBot import BotzCity
from telethon import events, Button
import random
from AccGenBot.func import check 
from vars import var

USERNAME = var.CHANNEL_USERNAME
CHANNEL = var.CHANNEL_URL

bot = BotzCity

@bot.on(events.NewMessage(pattern="/netflix"))
async def _(event):
   join = [[Button.url("Jᴏɪɴ ᴄʜᴀɴɴᴇʟ", f"{CHANNEL}")]]
   lol = await check(USERNAME, event, bot)
   if lol is False:
       await event.reply(f"**Heya {event.sender.first_name}, join my channel to use me!**", buttons=join)
       return
   gen = await event.reply("`Generating Account Pls weit`")
   if limit(int(event.sender.id)) >= var.DAILY_LIMIT:
       await gen.edit("`It seems that your daily limit has executed, You can contact admins to increase your daily limit`")
       return
   add_user(int(event.sender.id), int(1))
   with open("netflix.txt") as Alain:
       noice = Alain.read().splitlines()
       nice = random.choice(noice)
       email, pass = nice.split(":")
   okay = f"""**Account Generated Successfully**"
**Type:** `Netflix`
**Combo:** `{email}`:`{pass}`
**Email:** **{email}**
**Password:** `{pass}`

**Generated by:** @{event.sender.username}"""
   await gen.edit(okay)
